"use strict";(self.webpackChunkreact_portfolio=self.webpackChunkreact_portfolio||[]).push([[292],{7292:(e,t,i)=>{i.r(t),i.d(t,{default:()=>s});var n=i(9950),o=i(4414);const r=e=>{let{enabled:t=!0,density:i="medium",maxParticles:r=150}=e;const s=(0,n.useRef)(null),a=(0,n.useRef)(null),c=(0,n.useRef)([]),l=(0,n.useRef)({x:0,y:0}),u=(0,n.useRef)(0),h=(0,n.useRef)(60),[d,m]=(0,n.useState)(!0),[f,g]=(0,n.useState)({isMobile:!1,isLowPerformance:!1,supportsWebGL:!1,devicePixelRatio:1}),p=(0,n.useCallback)((()=>{const e=navigator.userAgent.toLowerCase(),t=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(e)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2||window.innerWidth<=768,i=t||navigator.hardwareConcurrency<=2||window.innerWidth<=480||navigator.connection&&navigator.connection.effectiveType&&["slow-2g","2g","3g"].includes(navigator.connection.effectiveType),n=document.createElement("canvas");return{isMobile:t,isLowPerformance:i,supportsWebGL:!(!n.getContext("webgl")&&!n.getContext("experimental-webgl")),devicePixelRatio:Math.min(window.devicePixelRatio||1,2)}}),[]),b=(0,n.useCallback)((()=>{const e=f;if(window.innerWidth<=480||e.isLowPerformance)return{enabled:!1};if(e.isMobile)return{enabled:!0,spacing:50,maxParticles:50,connectionDistance:80,particleSize:2,fps:30,mouseEffect:!1,animations:!1};if(window.innerWidth<=991)return{enabled:!0,spacing:40,maxParticles:80,connectionDistance:100,particleSize:1.5,fps:45,mouseEffect:!0,animations:!0};return{enabled:!0,...{low:{spacing:60,maxParticles:80,connectionDistance:120},medium:{spacing:35,maxParticles:150,connectionDistance:100},high:{spacing:25,maxParticles:200,connectionDistance:80}}[i],particleSize:1.5,fps:60,mouseEffect:!0,animations:!0}}),[f,i]);class w{constructor(e,t,i){this.x=e,this.y=t,this.originalX=e,this.originalY=t,this.size=i.particleSize,this.baseColor="rgba(255, 255, 255, 0.15)",this.highlightColor="rgba(0, 199, 255, 0.8)",this.maxDistance=i.connectionDistance,this.mouseEffect=i.mouseEffect,this.velocity={x:0,y:0},this.returnSpeed=.02,this.colorComponents={base:[255,255,255,.15],highlight:[0,199,255,.8]}}update(e,t,i,n){let o=1/0,r=0;if(this.mouseEffect){const e=t-this.x,n=i-this.y;if(o=Math.sqrt(e*e+n*n),o<this.maxDistance){r=1-o/this.maxDistance;const e=2*r;this.velocity.x+=(this.x-t)*e*.001,this.velocity.y+=(this.y-i)*e*.001}}return this.velocity.x+=(this.originalX-this.x)*this.returnSpeed,this.velocity.y+=(this.originalY-this.y)*this.returnSpeed,this.velocity.x*=.95,this.velocity.y*=.95,this.x+=this.velocity.x,this.y+=this.velocity.y,this.draw(e,r),{x:this.x,y:this.y,intensity:r}}draw(e,t){if(e.beginPath(),e.arc(this.x,this.y,this.size+2*t,0,2*Math.PI),t>0){const[i,n,o]=this.colorComponents.highlight;e.fillStyle=`rgba(${i}, ${n}, ${o}, ${t})`}else{const[t,i,n,o]=this.colorComponents.base;e.fillStyle=`rgba(${t}, ${i}, ${n}, ${o})`}e.fill()}}const x=(0,n.useCallback)(((e,t)=>{const i=[],{spacing:n,maxParticles:o}=t;let r=0;for(let s=n;s<e.height&&r<o;s+=n)for(let a=n;a<e.width&&r<o;a+=n)i.push(new w(a,s,t)),r++;return i}),[]),v=(0,n.useCallback)(((e,t,i)=>{const{connectionDistance:n}=i,o=f.isMobile?5:10;let r=0;for(let s=0;s<t.length&&r<o;s++){const i=t[s];for(let a=s+1;a<t.length&&r<o;a++){const o=t[a],s=i.x-o.x,c=i.y-o.y,l=Math.sqrt(s*s+c*c);if(l<n){const t=.1*(1-l/n);e.beginPath(),e.moveTo(i.x,i.y),e.lineTo(o.x,o.y),e.strokeStyle=`rgba(255, 255, 255, ${t})`,e.lineWidth=.5,e.stroke(),r++}}}}),[f.isMobile]),y=(0,n.useCallback)((e=>{const t=1e3/h.current;return e-u.current<t||(u.current=e,!1)}),[]),C=(0,n.useCallback)((()=>{let e=0,t=performance.now();return()=>{e++;const i=performance.now();if(e>=60){e/(i-t)*1e3<.7*h.current&&!f.isLowPerformance&&(console.log("Performance degradation detected, switching to low performance mode"),g((e=>({...e,isLowPerformance:!0}))),h.current=Math.max(h.current-15,15)),e=0,t=i}}}),[f.isLowPerformance]),P=(0,n.useCallback)((e=>{if(!d||!t)return void(a.current=requestAnimationFrame(P));if(y(e))return void(a.current=requestAnimationFrame(P));const i=s.current;if(!i)return void(a.current=requestAnimationFrame(P));const n=i.getContext("2d"),o=b();if(!o.enabled)return;n.clearRect(0,0,i.width,i.height);const r=c.current,{x:u,y:h}=l.current,m=r.map((e=>e.update(n,u,h,o)));(!f.isMobile||Math.random()>.5)&&v(n,m,o),window.performance&&"function"===typeof C&&C(),a.current=requestAnimationFrame(P)}),[d,t,y,b,v,f.isMobile,C]),k=(0,n.useCallback)((()=>{const e=s.current;if(!e)return;const t=e.getBoundingClientRect(),i=f.devicePixelRatio;e.width=t.width*i,e.height=t.height*i;e.getContext("2d").scale(i,i),e.style.width=t.width+"px",e.style.height=t.height+"px";const n=b();n.enabled&&(c.current=x(e,n))}),[f.devicePixelRatio,b,x]),E=(0,n.useCallback)((e=>{if(!b().mouseEffect)return;const t=s.current;if(!t)return;const i=t.getBoundingClientRect();l.current={x:e.clientX-i.left,y:e.clientY-i.top}}),[b]),L=(0,n.useCallback)((()=>{m(!document.hidden),document.hidden?h.current=15:h.current=f.isMobile?30:60}),[f.isMobile]);(0,n.useEffect)((()=>{const e=p();g(e)}),[p]),(0,n.useEffect)((()=>{if(!b().enabled||!t)return;return s.current?(k(),window.addEventListener("resize",k),window.addEventListener("mousemove",E),document.addEventListener("visibilitychange",L),a.current=requestAnimationFrame(P),()=>{window.removeEventListener("resize",k),window.removeEventListener("mousemove",E),document.removeEventListener("visibilitychange",L),a.current&&cancelAnimationFrame(a.current)}):void 0}),[t,k,E,L,P,b]);return b().enabled&&t?(0,o.jsx)("canvas",{ref:s,className:"particle-grid-canvas",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:-1,pointerEvents:"none",opacity:d?1:0,transition:"opacity 0.3s ease"},"aria-hidden":"true"}):null},s=n.memo(r)}}]);